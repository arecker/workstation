---
- hosts: local
  roles:
    - base

  tasks:
    - name: fix default keyboard
      lineinfile: name="/etc/default/keyboard" regexp="^XKBOPTIONS" line="XKBOPTIONS=\"ctrl:nocaps\""
      become: true

    - name: clone emacs source
      git: repo="git://git.sv.gnu.org/emacs.git" dest="~/src/emacs" update="no"

    - name: install emacs dependencies
      package: name="{{ item }}" state="present"
      become: true
      with_items:
        - autoconf
        - automake
        - libtool
        - texinfo
        - build-essential
        - xorg-dev
        - libgtk2.0-dev
        - libjpeg-dev
        - libncurses5-dev
        - libdbus-1-dev
        - libgif-dev
        - libtiff-dev
        - libm17n-dev
        - libpng-dev
        - librsvg2-dev
        - libotf-dev
        - libgnutls28-dev
        - libxml2-dev

    - name: install xorg
      package: name="xorg" state="present"
      become: true

    - name: install i3
      package: name="i3" state="present"
      become: true

    - name: install inconsolata
      package: name="fonts-inconsolata" state="present"
      become: true

    - name: motd
      copy: src="files/motd" dest="/etc/motd"
      become: true

    - name: dirs
      copy: src="files/user-dirs.dirs" dest="~/.config/user-dirs.dirs"

    - name: install random packages
      package: name="{{ item }}" state="present"
      become: true
      with_items:
        - nitrogen
        - xscreensaver
        - xscreensaver-data
        - xscreensaver-data-extra
        - xscreensaver-gl
        - xscreensaver-gl-extra
        - xscreensaver-screensaver-bsod
